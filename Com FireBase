<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AGENDAMENTO DE SALAS</title>
  <style>
    /* Seu CSS existente aqui */
  </style>
</head>
<body>
  <div class="container">
    <!-- Seu HTML existente aqui -->
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getDatabase, ref, set, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-analytics.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC6Kp13xggjvgBma0MRogT73pKceuONDG0",
      authDomain: "reserva-sala-76ce6.firebaseapp.com",
      databaseURL: "https://reserva-sala-76ce6-default-rtdb.firebaseio.com",
      projectId: "reserva-sala-76ce6",
      storageBucket: "reserva-sala-76ce6.appspot.com",
      messagingSenderId: "629680009465",
      appId: "1:629680009465:web:96e827b228bf73c95bb228",
      measurementId: "G-HWMHVHXE65"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);

    // Seu código JavaScript existente
    const form = document.getElementById('agendamentoForm');
    const listaAgendamentos = document.getElementById('listaAgendamentos');
    const agendarButton = document.getElementById('agendarButton');
    const verMesBtn = document.getElementById('verMes');
    const planner = document.getElementById('planner');
    const plannerBody = document.getElementById('plannerBody');
    const voltarBtn = document.getElementById('voltar');

    const finalidadeSelect = document.getElementById('finalidade');
    const solicitanteSelect = document.getElementById('solicitante');
    const nomeSolicitanteInput = document.getElementById('nomeSolicitante');

    const tccFields = document.getElementById('tccFields');
    const manutencaoFields = document.getElementById('manutencaoFields');

    const temaTcc = document.getElementById('temaTcc');
    const bancaTcc = document.getElementById('bancaTcc');
    const orientadorTcc = document.getElementById('orientadorTcc');
    const motivoManutencao = document.getElementById('motivoManutencao');

    let editIndex = -1;

    const professores = ['BRUNA MARCELE', 'DANIELLE BACARELLI', 'DIANA COSTA', 'DOUGLAS CARAGELASCO', 'JOÃO FLÁVIO', 'LÍVIA BIAZZO', 'MARIANA MIRANDA', 'MARILIA FILIPONI', 'MARTA LUPPI', 'MICHELE BARROS', 'PAULA GUIMARÃES', 'PAULO GRISKA', 'PAULO ANSELMO', 'RAFAEL NEVES'];

    function salvarAgendamentos(agendamento) {
      const agendamentosRef = ref(database, 'agendamentos');
      push(agendamentosRef, agendamento);
    }

    function carregarAgendamentos() {
      const agendamentosRef = ref(database, 'agendamentos');
      onValue(agendamentosRef, (snapshot) => {
        const data = snapshot.val();
        if (data) {
          const agendamentos = Object.entries(data).map(([key, value]) => ({
            id: key,
            ...value
          }));
          atualizarListaAgendamentos(agendamentos);
        }
      });
    }

    carregarAgendamentos();

    // Resto do seu código JavaScript (funções como carregarSolicitantes, atualizarListaAgendamentos, etc.)

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      // Seu código existente para capturar os dados do formulário

      const novoAgendamento = { finalidade, solicitante, nomeSolicitante, sala, data, hora, tema, banca, orientador, motivo };

      salvarAgendamentos(novoAgendamento);
      alert('AGENDAMENTO REALIZADO COM SUCESSO!');

      form.reset();
      tccFields.classList.add('hidden');
      manutencaoFields.classList.add('hidden');
    });

    function excluirAgendamento(id, nomeSolicitante) {
      const nomeUsuarioAtual = prompt('PARA EXCLUIR, DIGITE O SEU NOME:');

      if (nomeUsuarioAtual === nomeSolicitante) {
        const agendamentoRef = ref(database, `agendamentos/${id}`);
        remove(agendamentoRef);
        alert('AGENDAMENTO EXCLUÍDO COM SUCESSO!');
      } else {
        alert('VOCÊ SÓ PODE EXCLUIR SEUS PRÓPRIOS AGENDAMENTOS.');
      }
    }

    // Resto do seu código JavaScript (funções como verMesBtn.addEventListener, isThisMonth, etc.)

  </script>
</body>
</html>
